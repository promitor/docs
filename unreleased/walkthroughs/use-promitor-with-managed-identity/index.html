
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Bringing Azure Monitor metrics where you need them">
      
      
        <meta name="author" content="Tom Kerkhove">
      
      
        <link rel="canonical" href="https://promitor.io/unreleased/walkthroughs/use-promitor-with-managed-identity/">
      
      
        <link rel="prev" href="../scrape-promitor-with-prometheus-on-azure-kubernetes-service/">
      
      
        <link rel="next" href="../migrate-from-1.x-to-2.x/">
      
      
      <link rel="icon" href="../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.5">
    
    
      
        <title>Using Managed Identity with Promitor on an AKS Cluster - Promitor - Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.8608ea7d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-Q2ZZ6S7ZPW"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-Q2ZZ6S7ZPW",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-Q2ZZ6S7ZPW",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#using-managed-identity-with-promitor-on-azure-kubernetes-service" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Promitor - Documentation" class="md-header__button md-logo" aria-label="Promitor - Documentation" data-md-component="logo">
      
  <img src="../../media/logos/promitor-logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Promitor - Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Using Managed Identity with Promitor on an AKS Cluster
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/promitor/docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    promitor/docs
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../.." class="md-tabs__link">
          
  
    
  
  Home

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../how-it-works/" class="md-tabs__link">
        
  
    
  
  How It Works

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../scraping/overview/" class="md-tabs__link">
          
  
    
  
  Scraping

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../resource-discovery/overview/" class="md-tabs__link">
          
  
    
  
  Resource Discovery

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../deployment/" class="md-tabs__link">
          
  
    
  
  Deployment

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../security/azure-authentication/" class="md-tabs__link">
          
  
    
  
  Security

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../operations/" class="md-tabs__link">
          
  
    
  
  Operations

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../scrape-promitor-with-prometheus-on-azure-kubernetes-service/" class="md-tabs__link">
          
  
    
  
  Walkthroughs

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../faq/" class="md-tabs__link">
        
  
    
  
  FAQ

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Promitor - Documentation" class="md-nav__button md-logo" aria-label="Promitor - Documentation" data-md-component="logo">
      
  <img src="../../media/logos/promitor-logo.svg" alt="logo">

    </a>
    Promitor - Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/promitor/docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    promitor/docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../.." class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1" id="__nav_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Home
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../thank-you/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Thank You
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how-it-works/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How It Works
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Scraping
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Scraping
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/labels/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Metric Labelling
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/runtime-configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Runtime Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/batch-scraping/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Use Batch Scraping (Experimental)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Available Providers
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            Available Providers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/generic-azure-resource/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Generic
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/api-management/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure API Management
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/app-plan/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure App Plan
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/application-gateway/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Application Gateway
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/application-insights/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Application Insights
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/automation-account/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Automation account
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/blob-storage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Blob Storage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/redis-cache/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Cache for Redis
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/redis-enterprise-cache/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Cache for Redis Enterprise
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/cdn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Content Delivery Network (CDN)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/container-instances/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Container Instances
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/container-registry/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Container Registry
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/cosmos-db/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Cosmos DB
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/maria-db/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Database for MariaDB
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/postgresql/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Database for PostgreSQL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/mysql/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Database for MySQL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/data-factory/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Data Factory
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/data-share/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Data Share
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/event-hubs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Event Hubs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/express-route-circuit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Express Route Circuit
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/file-storage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure File Storage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/azure-firewall/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Firewall
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/front-door/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Front Door
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/function-app/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Function App
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/iot-hub-device-provisioning-service/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure IoT Hub Device Provisioning Service (DPS)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/iot-hub/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure IoT Hub
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/key-vault/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Key Vault
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/kubernetes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Kubernetes Service
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/data-explorer-clusters/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Data Explorer Cluster
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/load-balancer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Load Balancer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/log-analytics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Log Analytics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/logic-apps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Logic Apps
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/monitor-autoscale/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Monitor Autoscale
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/nat-gateway/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Nat Gateways
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/network-gateway/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Network Gateway
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/network-interface/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Network Interface
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/powerbi-dedicated/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure PowerBI Dedicated
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/public-ip-address/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Public IP Address
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/service-bus-namespace/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Service Bus Namespace
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/sql-database/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure SQL Database
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/sql-elastic-pool/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure SQL Elastic Pool
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/sql-managed-instance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure SQL Managed Instance
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/sql-server/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure SQL Server
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/storage-account/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Storage Account
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/storage-queue/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Storage Queue
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/synapse-apache-spark-pool/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Synapse (Apache Spark pool)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/synapse-sql-pool/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Synapse (SQL pool)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/synapse-workspace/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Synapse (Workspace)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/traffic-manager/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Traffic Manager
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/virtual-machine-scale-set/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Virtual Machine Scale Set (VMSS)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/virtual-machine/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Virtual Machine (VM)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/virtual-network/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Virtual Network
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/web-app/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Web App
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Resource Discovery
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Resource Discovery
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resource-discovery/overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resource-discovery/declaring-resource-discovery-groups/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Declaring resource discovery groups
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../resource-discovery/runtime-configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Runtime Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Supported Providers
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Supported Providers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/api-management/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure API Management
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/app-plan/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure App Plan
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/application-gateway/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Application Gateway
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/application-insights/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Application Insights
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/automation-account/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Automation account
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/redis-cache/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Cache for Redis
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/redis-enterprise-cache/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Cache for Redis Enterprise
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/cdn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Content Delivery Network (CDN)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/container-instances/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Container Instances
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/container-registry/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Container Registry
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/cosmos-db/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Cosmos DB
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/maria-db/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Database for MariaDB
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/postgresql/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Database for PostgreSQL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/mysql/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Database for MySQL
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/data-factory/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Data Factory
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/data-share/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Data Share
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/event-hubs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Event Hubs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/express-route-circuit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Express Route Circuit
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/file-storage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure File Storage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/azure-firewall/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Firewall
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/front-door/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Front Door
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/function-app/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Function App
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/iot-hub-device-provisioning-service/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure IoT Hub Device Provisioning Service (DPS)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/iot-hub/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure IoT Hub
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/key-vault/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Key Vault
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/kubernetes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Kubernetes Service
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/data-explorer-clusters/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Data Explorer Cluster
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/load-balancer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Load Balancer
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/logic-apps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Logic Apps
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/monitor-autoscale/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Monitor Autoscale
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/nat-gateway/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Nat Gateways
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/network-gateway/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Network Gateway
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/network-interface/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Network Interface
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/powerbi-dedicated/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure PowerBI Dedicated
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/public-ip-address/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Public IP Address
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/service-bus-namespace/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Service Bus Namespace
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/sql-database/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure SQL Database
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/sql-elastic-pool/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure SQL Elastic Pool
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/sql-managed-instance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure SQL Managed Instance
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/sql-managed-instance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure SQL Managed Instance
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/storage-account/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Storage Account
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/synapse-apache-spark-pool/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Synapse (Apache Spark pool)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/synapse-sql-pool/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Synapse (SQL pool)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/synapse-workspace/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Synapse (Workspace)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/traffic-manager/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Traffic Manager
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/virtual-machine-scale-set/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Virtual Machine Scale Set (VMSS)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/virtual-machine/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Virtual Machine (VM)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/virtual-network/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Virtual Network
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scraping/providers/web-app/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Web App
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../deployment/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Deployment
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Deployment
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../deployment/scraper/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Scraper
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            Scraper
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/scraper/docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/scraper/kubernetes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kubernetes
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../deployment/resource-discovery/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Resource Discovery
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            Resource Discovery
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/resource-discovery/docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../deployment/resource-discovery/kubernetes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kubernetes
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Security
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Security
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../security/azure-authentication/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Authentication with Microsoft Azure
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../operations/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Operations
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7" id="__nav_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Operations
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/health/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Health
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/discovery/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Resource Discovery
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/performance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Performance
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/system/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    System
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../operations/integrations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Integrations
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" checked>
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Walkthroughs
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Walkthroughs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../scrape-promitor-with-prometheus-on-azure-kubernetes-service/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deploying Promitor, Prometheus, and Grafana on an AKS Cluster
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Using Managed Identity with Promitor on an AKS Cluster
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Using Managed Identity with Promitor on an AKS Cluster
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      Table of Contents
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploying-the-azure-infrastructure" class="md-nav__link">
    <span class="md-ellipsis">
      Deploying the Azure Infrastructure
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Deploying the Azure Infrastructure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#preparing-script" class="md-nav__link">
    <span class="md-ellipsis">
      Preparing script
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-an-azure-resource-group" class="md-nav__link">
    <span class="md-ellipsis">
      Creating an Azure Resource Group
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-an-azure-service-bus-namespace-queue" class="md-nav__link">
    <span class="md-ellipsis">
      Creating an Azure Service Bus Namespace &amp; Queue
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-an-azure-kubernetes-service-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      Creating an Azure Kubernetes Service Cluster
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-up-our-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      Setting up our cluster
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Setting up our cluster">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#getting-the-cluster-credentials" class="md-nav__link">
    <span class="md-ellipsis">
      Getting The Cluster Credentials
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-azure-kubernetes-service-managed-identity-cluster-resource-group" class="md-nav__link">
    <span class="md-ellipsis">
      Get Azure Kubernetes Service managed identity &amp; cluster resource group
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-our-cluster-ready-to-use-aad-pod-identity" class="md-nav__link">
    <span class="md-ellipsis">
      Getting our cluster ready to use AAD Pod Identity
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Getting our cluster ready to use AAD Pod Identity">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#granting-our-clusters-managed-identity-required-permissions-in-azure" class="md-nav__link">
    <span class="md-ellipsis">
      Granting our cluster's managed identity required permissions in Azure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installing-aad-pod-identity" class="md-nav__link">
    <span class="md-ellipsis">
      Installing AAD Pod Identity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-a-user-assigned-managed-identity-for-promitor" class="md-nav__link">
    <span class="md-ellipsis">
      Creating a user-assigned managed identity for Promitor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bind-your-managed-identity-to-our-pods-through-aad-pod-identity" class="md-nav__link">
    <span class="md-ellipsis">
      Bind your Managed Identity to our Pods, through AAD Pod Identity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verifying-the-aad-pod-identity-installation" class="md-nav__link">
    <span class="md-ellipsis">
      Verifying the AAD Pod Identity installation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploying-promitor-with-managed-identity" class="md-nav__link">
    <span class="md-ellipsis">
      Deploying Promitor with Managed Identity
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Deploying Promitor with Managed Identity">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-a-metrics-declaration-for-promitor" class="md-nav__link">
    <span class="md-ellipsis">
      Create a metrics declaration for Promitor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-promitor-to-your-cluster-using-helm" class="md-nav__link">
    <span class="md-ellipsis">
      Deploy Promitor to your cluster using Helm
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verifying-the-scraped-output-in-promitor" class="md-nav__link">
    <span class="md-ellipsis">
      Verifying the scraped output in Promitor
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cleaning-up" class="md-nav__link">
    <span class="md-ellipsis">
      Cleaning up
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../migrate-from-1.x-to-2.x/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Migrate from Promitor Scraper 1.x to 2.x
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../faq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FAQ
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" class="md-nav__link">
    <span class="md-ellipsis">
      Table of Contents
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploying-the-azure-infrastructure" class="md-nav__link">
    <span class="md-ellipsis">
      Deploying the Azure Infrastructure
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Deploying the Azure Infrastructure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#preparing-script" class="md-nav__link">
    <span class="md-ellipsis">
      Preparing script
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-an-azure-resource-group" class="md-nav__link">
    <span class="md-ellipsis">
      Creating an Azure Resource Group
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-an-azure-service-bus-namespace-queue" class="md-nav__link">
    <span class="md-ellipsis">
      Creating an Azure Service Bus Namespace &amp; Queue
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-an-azure-kubernetes-service-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      Creating an Azure Kubernetes Service Cluster
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-up-our-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      Setting up our cluster
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Setting up our cluster">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#getting-the-cluster-credentials" class="md-nav__link">
    <span class="md-ellipsis">
      Getting The Cluster Credentials
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#get-azure-kubernetes-service-managed-identity-cluster-resource-group" class="md-nav__link">
    <span class="md-ellipsis">
      Get Azure Kubernetes Service managed identity &amp; cluster resource group
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-our-cluster-ready-to-use-aad-pod-identity" class="md-nav__link">
    <span class="md-ellipsis">
      Getting our cluster ready to use AAD Pod Identity
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Getting our cluster ready to use AAD Pod Identity">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#granting-our-clusters-managed-identity-required-permissions-in-azure" class="md-nav__link">
    <span class="md-ellipsis">
      Granting our cluster's managed identity required permissions in Azure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installing-aad-pod-identity" class="md-nav__link">
    <span class="md-ellipsis">
      Installing AAD Pod Identity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#creating-a-user-assigned-managed-identity-for-promitor" class="md-nav__link">
    <span class="md-ellipsis">
      Creating a user-assigned managed identity for Promitor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bind-your-managed-identity-to-our-pods-through-aad-pod-identity" class="md-nav__link">
    <span class="md-ellipsis">
      Bind your Managed Identity to our Pods, through AAD Pod Identity
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verifying-the-aad-pod-identity-installation" class="md-nav__link">
    <span class="md-ellipsis">
      Verifying the AAD Pod Identity installation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deploying-promitor-with-managed-identity" class="md-nav__link">
    <span class="md-ellipsis">
      Deploying Promitor with Managed Identity
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Deploying Promitor with Managed Identity">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create-a-metrics-declaration-for-promitor" class="md-nav__link">
    <span class="md-ellipsis">
      Create a metrics declaration for Promitor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploy-promitor-to-your-cluster-using-helm" class="md-nav__link">
    <span class="md-ellipsis">
      Deploy Promitor to your cluster using Helm
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verifying-the-scraped-output-in-promitor" class="md-nav__link">
    <span class="md-ellipsis">
      Verifying the scraped output in Promitor
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cleaning-up" class="md-nav__link">
    <span class="md-ellipsis">
      Cleaning up
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="using-managed-identity-with-promitor-on-azure-kubernetes-service">Using Managed Identity with Promitor on Azure Kubernetes Service<a class="headerlink" href="#using-managed-identity-with-promitor-on-azure-kubernetes-service" title="Permanent link">&para;</a></h1>
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h2>
<p>This walkthrough will allow you to deploy Promitor that uses <a href="https://docs.microsoft.com/en-us/azure/active-directory/managed-identities-azure-resources/overview">Managed Identity</a>
 on an Azure Kubernetes Service cluster to scrape Azure Service Bus metrics, using no-password authentication.</p>
<p>In order to achieve this, we will use the <a href="https://github.com/Azure/aad-pod-identity">AAD Pod Identity project</a> to
 manage the identities and authentication.</p>
<blockquote>
<p>⚠ This only works with Azure Kubernetes Service - Learn more about <a href="https://docs.microsoft.com/en-us/azure/aks/use-managed-identity">Managed Identity in Azure Kubernetes Service</a>
in the official Microsoft documentation.</p>
</blockquote>
<h2 id="table-of-contents">Table of Contents<a class="headerlink" href="#table-of-contents" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#table-of-contents">Table of Contents</a></li>
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#deploying-the-azure-infrastructure">Deploying the Azure Infrastructure</a><ul>
<li><a href="#preparing-script">Preparing script</a></li>
<li><a href="#creating-an-azure-resource-group">Creating an Azure Resource Group</a></li>
<li><a href="#creating-an-azure-service-bus-namespace-queue">Creating an Azure Service Bus Namespace &amp; Queue</a></li>
<li><a href="#creating-an-azure-kubernetes-service-cluster">Creating an Azure Kubernetes Service Cluster</a></li>
</ul>
</li>
<li><a href="#setting-up-our-cluster">Setting up our cluster</a><ul>
<li><a href="#getting-the-cluster-credentials">Getting The Cluster Credentials</a></li>
<li><a href="#get-azure-kubernetes-service-managed-identity-cluster-resource-group">Get Azure Kubernetes Service managed identity &amp; cluster resource group</a></li>
</ul>
</li>
<li><a href="#getting-our-cluster-ready-to-use-aad-pod-identity">Getting our cluster ready to use AAD Pod Identity</a><ul>
<li><a href="#granting-our-clusters-managed-identity-required-permissions-in-azure">Granting our cluster's managed identity required permissions in Azure</a></li>
<li><a href="#installing-aad-pod-identity">Installing AAD Pod Identity</a></li>
<li><a href="#creating-a-user-assigned-managed-identity-for-promitor">Creating a user-assigned managed identity for Promitor</a></li>
<li><a href="#bind-your-managed-identity-to-our-pods-through-aad-pod-identity">Bind your Managed Identity to our Pods, through AAD Pod Identity</a></li>
<li><a href="#verifying-the-aad-pod-identity-installation">Verifying the AAD Pod Identity installation</a></li>
</ul>
</li>
<li><a href="#deploying-promitor-with-managed-identity">Deploying Promitor with Managed Identity</a><ul>
<li><a href="#create-a-metrics-declaration-for-promitor">Create a metrics declaration for Promitor</a></li>
<li><a href="#deploy-promitor-to-your-cluster-using-helm">Deploy Promitor to your cluster using Helm</a></li>
<li><a href="#verifying-the-scraped-output-in-promitor">Verifying the scraped output in Promitor</a></li>
</ul>
</li>
<li><a href="#cleaning-up">Cleaning up</a></li>
</ul>
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="https://docs.microsoft.com/en-us/cli/azure/install-azure-cli?view=azure-cli-latest">Azure CLI</a>,
to be able to deploy resources through the command line.</li>
<li><a href="https://kubernetes.io/docs/tasks/tools/install-kubectl/">kubectl</a>, the Kubernetes
  command-line tool. It can also be installed via the Azure CLI with <code>az aks install-cli</code>.</li>
<li><a href="https://helm.sh/docs/using_helm/#installing-the-helm-client">Helm</a>, a Kubernetes
  deployment manager.</li>
<li><a href="https://docs.microsoft.com/en-us/windows/wsl/">WSL</a>, if you are using a Windows machine to deploy your whole solution.</li>
</ul>
<h2 id="deploying-the-azure-infrastructure">Deploying the Azure Infrastructure<a class="headerlink" href="#deploying-the-azure-infrastructure" title="Permanent link">&para;</a></h2>
<h3 id="preparing-script">Preparing script<a class="headerlink" href="#preparing-script" title="Permanent link">&para;</a></h3>
<p>Since we are going to use a lot of bash scripts with different variables values,
it can be a good idea to parameterize everything.</p>
<p>Let's start by <strong>exporting</strong> all the values we need:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1"># SUBSCRIPTION_ID represents the Azure subscription id you will use to access your Azure resources</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="nb">export</span><span class="w"> </span><span class="nv">SUBSCRIPTION_ID</span><span class="o">=</span>&lt;subscription-id&gt;
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="c1"># RG_NAME represents the resource group name where your cluster will be deployed</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="nb">export</span><span class="w"> </span><span class="nv">RG_NAME</span><span class="o">=</span>PromitorWithManagedIdentityRG
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="c1"># LOCATION represents the Azure region where your cluster will be deployed</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="nb">export</span><span class="w"> </span><span class="nv">LOCATION</span><span class="o">=</span>northeurope
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="c1"># CLUSTER_NAME represents the name of your Azure Kubernetes Service Cluster</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="nb">export</span><span class="w"> </span><span class="nv">CLUSTER_NAME</span><span class="o">=</span>PromitorCluster
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="c1"># AD_POD_IDENTITY_NAME represents the name of the Azure AD identity that will be assigned to Promitor.</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="c1"># Be careful, should be lower case alphanumeric characters, &#39;-&#39; or &#39;.&#39;</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="nb">export</span><span class="w"> </span><span class="nv">AD_POD_IDENTITY_NAME</span><span class="o">=</span>promitor-identity
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="c1"># As an example, we are going to use a service bus from where we want to grab some metrics, through Promitor</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="c1"># SERVICE_BUS_NAMESPACE represents the name of your Azure Service Bus namespace.</span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="c1"># Be careful as Azure Service Bus Namespaces need to be globally unique.</span>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="nb">export</span><span class="w"> </span><span class="nv">SERVICE_BUS_NAMESPACE</span><span class="o">=</span>PromitorUniqueNameServiceBus
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a>
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a><span class="c1"># SERVICE_BUS_QUEUE represents the name of you Azure Service Bus queue.</span>
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a><span class="nb">export</span><span class="w"> </span><span class="nv">SERVICE_BUS_QUEUE</span><span class="o">=</span>demo_queue
</code></pre></div>
<h3 id="creating-an-azure-resource-group">Creating an Azure Resource Group<a class="headerlink" href="#creating-an-azure-resource-group" title="Permanent link">&para;</a></h3>
<p>First, let's create an Azure resource group in which we'll group all our resources:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>$<span class="w"> </span>az<span class="w"> </span>group<span class="w"> </span>create<span class="w"> </span>--name<span class="w"> </span><span class="nv">$RG_NAME</span><span class="w"> </span>--location<span class="w"> </span><span class="nv">$LOCATION</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="o">{</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">  </span><span class="s2">&quot;id&quot;</span>:<span class="w"> </span><span class="s2">&quot;/subscriptions/&lt;subscription-id&gt;/resourceGroups/&lt;resource-group-name&gt;&quot;</span>,
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">  </span><span class="s2">&quot;location&quot;</span>:<span class="w"> </span><span class="s2">&quot;&lt;location-id&gt;&quot;</span>,
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">  </span><span class="s2">&quot;managedBy&quot;</span>:<span class="w"> </span>null,
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">  </span><span class="s2">&quot;name&quot;</span>:<span class="w"> </span><span class="s2">&quot;&lt;resource-group-name&gt;&quot;</span>,
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">  </span><span class="s2">&quot;properties&quot;</span>:<span class="w"> </span><span class="o">{</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">    </span><span class="s2">&quot;provisioningState&quot;</span>:<span class="w"> </span><span class="s2">&quot;Succeeded&quot;</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="w">  </span><span class="o">}</span>,
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="w">  </span><span class="s2">&quot;tags&quot;</span>:<span class="w"> </span>null,
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="w">  </span><span class="s2">&quot;type&quot;</span>:<span class="w"> </span><span class="s2">&quot;Microsoft.Resources/resourceGroups&quot;</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="o">}</span>
</code></pre></div>
<h3 id="creating-an-azure-service-bus-namespace-queue">Creating an Azure Service Bus Namespace &amp; Queue<a class="headerlink" href="#creating-an-azure-service-bus-namespace-queue" title="Permanent link">&para;</a></h3>
<p>First we'll need to create an Azure Service Bus namespace that provides metrics in Azure Monitor.</p>
<p>These metrics will be scraped by Promitor and made available to the configured metric sinks.</p>
<blockquote>
<p>💡 Consider this to be an example of metrics that you'd want to use in Prometheus, StatsD, ...</p>
</blockquote>
<p>Let's create the Azure Service Bus namespace:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>$<span class="w"> </span>az<span class="w"> </span>servicebus<span class="w"> </span>namespace<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w">  </span>--resource-group<span class="w"> </span><span class="nv">$RG_NAME</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">  </span>--name<span class="w"> </span><span class="nv">$SERVICE_BUS_NAMESPACE</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">  </span>--location<span class="w"> </span><span class="nv">$LOCATION</span>
</code></pre></div>
<p>After that, we'll create a queue in that namespace:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>$<span class="w"> </span>az<span class="w"> </span>servicebus<span class="w"> </span>queue<span class="w"> </span>create<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">  </span>--resource-group<span class="w"> </span><span class="nv">$RG_NAME</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">  </span>--namespace-name<span class="w"> </span><span class="nv">$SERVICE_BUS_NAMESPACE</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">  </span>--name<span class="w"> </span><span class="nv">$SERVICE_BUS_QUEUE</span>
</code></pre></div>
<h3 id="creating-an-azure-kubernetes-service-cluster">Creating an Azure Kubernetes Service Cluster<a class="headerlink" href="#creating-an-azure-kubernetes-service-cluster" title="Permanent link">&para;</a></h3>
<p>Create an Azure Kubernetes Service cluster that uses a system-assigned managed identity:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>$<span class="w"> </span>az<span class="w"> </span>aks<span class="w"> </span>create<span class="w"> </span>--resource-group<span class="w"> </span><span class="nv">$RG_NAME</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="w">    </span>--name<span class="w"> </span><span class="nv">$CLUSTER_NAME</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">    </span>--generate-ssh-keys<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">    </span>--node-count<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="w">    </span>--enable-managed-identity
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>...
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="s2">&quot;servicePrincipalProfile&quot;</span>:<span class="w"> </span><span class="o">{</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="w">    </span><span class="s2">&quot;clientId&quot;</span>:<span class="w"> </span><span class="s2">&quot;msi&quot;</span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="w">  </span><span class="o">}</span>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>...
</code></pre></div>
<p>Once created, the output will indicate that it is using managed identity.</p>
<h2 id="setting-up-our-cluster">Setting up our cluster<a class="headerlink" href="#setting-up-our-cluster" title="Permanent link">&para;</a></h2>
<h3 id="getting-the-cluster-credentials">Getting The Cluster Credentials<a class="headerlink" href="#getting-the-cluster-credentials" title="Permanent link">&para;</a></h3>
<p>In order to interact with the cluster by using <code>kubectl</code>, we need to be able to authenticate to it.</p>
<p>You can get the credentials for your Kubernetes cluster using this command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>$<span class="w"> </span>az<span class="w"> </span>aks<span class="w"> </span>get-credentials<span class="w"> </span>--name<span class="w"> </span><span class="nv">$CLUSTER_NAME</span><span class="w"> </span>--resource-group<span class="w"> </span><span class="nv">$RG_NAME</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>Merged<span class="w"> </span><span class="s2">&quot;&lt;cluster-name&gt;&quot;</span><span class="w"> </span>as<span class="w"> </span>current<span class="w"> </span>context<span class="w"> </span><span class="k">in</span><span class="w"> </span>/home/tom/.kube/config
</code></pre></div>
<p>This saves the credentials in your kubeconfig file and uses it as your current context for all <code>kubectl</code> commands.</p>
<p>Verify that you can connect and your cluster is up and running :</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>$<span class="w"> </span>kubectl<span class="w"> </span>get<span class="w"> </span>nodes
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>NAME<span class="w">                                </span>STATUS<span class="w">   </span>ROLES<span class="w">   </span>AGE<span class="w">   </span>VERSION
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>aks-agentpool-34594731-vmss000000<span class="w">   </span>Ready<span class="w">    </span>agent<span class="w">   </span>15d<span class="w">   </span>v1.19.7
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>aks-agentpool-34594731-vmss000001<span class="w">   </span>Ready<span class="w">    </span>agent<span class="w">   </span>15d<span class="w">   </span>v1.19.7
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>aks-agentpool-34594731-vmss000002<span class="w">   </span>Ready<span class="w">    </span>agent<span class="w">   </span>15d<span class="w">   </span>v1.19.7
</code></pre></div>
<h3 id="get-azure-kubernetes-service-managed-identity-cluster-resource-group">Get Azure Kubernetes Service managed identity &amp; cluster resource group<a class="headerlink" href="#get-azure-kubernetes-service-managed-identity-cluster-resource-group" title="Permanent link">&para;</a></h3>
<p>To be able to configure AAD Pod Identity component, we need information from our new Azure Kubernetes Service cluster:</p>
<p>First, we need to get the <strong>name of the cluster resource group</strong> where the AKS internal resources have been deployed.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Retrieving cluster resource group&quot;</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="nb">export</span><span class="w"> </span><span class="nv">aks_rg_name</span><span class="o">=</span><span class="k">$(</span>az<span class="w"> </span>aks<span class="w"> </span>show<span class="w"> </span>-g<span class="w"> </span><span class="nv">$RG_NAME</span><span class="w"> </span>-n<span class="w"> </span><span class="nv">$CLUSTER_NAME</span><span class="w"> </span>--query<span class="w"> </span>nodeResourceGroup<span class="w"> </span>-otsv<span class="k">)</span>
</code></pre></div>
<p>This is a generated resource group that typically uses <code>MC_{resource-group}_{cluster-name}_{region}</code>, for example <code>MC_promitor-landscape_promitor_westeurope</code>.</p>
<p>Second, we need the <strong>identity of our cluster</strong>. This is the system-assigned identity of our cluster that is used to
 access Azure resources.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Retrieving cluster identity ID, which will be used for role assignment&quot;</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="nb">export</span><span class="w"> </span><span class="nv">aks_mi_identity</span><span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span>az<span class="w"> </span>aks<span class="w"> </span>show<span class="w"> </span>-g<span class="w"> </span><span class="si">${</span><span class="nv">RG_NAME</span><span class="si">}</span><span class="w"> </span>-n<span class="w"> </span><span class="si">${</span><span class="nv">CLUSTER_NAME</span><span class="si">}</span><span class="w"> </span>--query<span class="w"> </span>identityProfile.kubeletidentity.clientId<span class="w"> </span>-otsv<span class="k">)</span><span class="s2">&quot;</span>
</code></pre></div>
<p>This identity is managed by Azure, since we have used the <code>--enable-managed-identity</code> option during cluster creation.</p>
<h2 id="getting-our-cluster-ready-to-use-aad-pod-identity">Getting our cluster ready to use AAD Pod Identity<a class="headerlink" href="#getting-our-cluster-ready-to-use-aad-pod-identity" title="Permanent link">&para;</a></h2>
<h3 id="granting-our-clusters-managed-identity-required-permissions-in-azure">Granting our cluster's managed identity required permissions in Azure<a class="headerlink" href="#granting-our-clusters-managed-identity-required-permissions-in-azure" title="Permanent link">&para;</a></h3>
<p>In this walkthrough we are going to configure the <strong>managed identity for our cluster</strong> to allow AAD Pod Identity to access
 required resources in Azure.</p>
<blockquote>
<p>Learn more about the <a href="https://azure.github.io/aad-pod-identity/docs/getting-started/role-assignment/#performing-role-assignments">the required role assignments for AAD Pod Identity</a>
or have a general overview in the <a href="https://azure.github.io/aad-pod-identity/">official documentation</a>.</p>
</blockquote>
<p>In order to be able to use AAD Pod Identity, our cluster needs to be able to:</p>
<ul>
<li>Manage identities in our application &amp; cluster resource group</li>
<li>Manage the virtual machines that are part of the cluster, to use the assigned identity</li>
</ul>
<p>You can easily do this as following:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Assigning &#39;Managed Identity Operator&#39; role to </span><span class="si">${</span><span class="nv">aks_mi_identity</span><span class="si">}</span><span class="s2"> on resource group </span><span class="si">${</span><span class="nv">aks_rg_name</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>az<span class="w"> </span>role<span class="w"> </span>assignment<span class="w"> </span>create<span class="w"> </span>--role<span class="w"> </span><span class="s2">&quot;Managed Identity Operator&quot;</span><span class="w"> </span>--assignee<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">aks_mi_identity</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span>--scope<span class="w"> </span><span class="s2">&quot;/subscriptions/</span><span class="si">${</span><span class="nv">SUBSCRIPTION_ID</span><span class="si">}</span><span class="s2">/resourcegroups/</span><span class="si">${</span><span class="nv">aks_rg_name</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Assigning &#39;Virtual Machine Contributor&#39; role to </span><span class="si">${</span><span class="nv">aks_mi_identity</span><span class="si">}</span><span class="s2"> on resource group </span><span class="si">${</span><span class="nv">aks_rg_name</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>az<span class="w"> </span>role<span class="w"> </span>assignment<span class="w"> </span>create<span class="w"> </span>--role<span class="w"> </span><span class="s2">&quot;Virtual Machine Contributor&quot;</span><span class="w"> </span>--assignee<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">aks_mi_identity</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span>--scope<span class="w"> </span><span class="s2">&quot;/subscriptions/</span><span class="si">${</span><span class="nv">SUBSCRIPTION_ID</span><span class="si">}</span><span class="s2">/resourcegroups/</span><span class="si">${</span><span class="nv">aks_rg_name</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Assigning &#39;Managed Identity Operator&#39; role to </span><span class="si">${</span><span class="nv">aks_mi_identity</span><span class="si">}</span><span class="s2"> on resource group </span><span class="si">${</span><span class="nv">RG_NAME</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a>az<span class="w"> </span>role<span class="w"> </span>assignment<span class="w"> </span>create<span class="w"> </span>--role<span class="w"> </span><span class="s2">&quot;Managed Identity Operator&quot;</span><span class="w"> </span>--assignee<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">aks_mi_identity</span><span class="si">}</span><span class="s2">&quot;</span><span class="w"> </span>--scope<span class="w"> </span><span class="s2">&quot;/subscriptions/</span><span class="si">${</span><span class="nv">SUBSCRIPTION_ID</span><span class="si">}</span><span class="s2">/resourcegroups/</span><span class="si">${</span><span class="nv">RG_NAME</span><span class="si">}</span><span class="s2">&quot;</span>
</code></pre></div>
<h3 id="installing-aad-pod-identity">Installing AAD Pod Identity<a class="headerlink" href="#installing-aad-pod-identity" title="Permanent link">&para;</a></h3>
<p>To deploy AAD Pod Identity, we need to add the Helm chart repository:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>$<span class="w"> </span>helm<span class="w"> </span>repo<span class="w"> </span>add<span class="w"> </span>aad-pod-identity<span class="w"> </span>https://raw.githubusercontent.com/Azure/aad-pod-identity/master/charts
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="s2">&quot;aad-pod-identity&quot;</span><span class="w"> </span>has<span class="w"> </span>been<span class="w"> </span>added<span class="w"> </span>to<span class="w"> </span>your<span class="w"> </span>repositories
</code></pre></div>
<p>Update all your Helm repositories to use the latest and greatest:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>$<span class="w"> </span>helm<span class="w"> </span>repo<span class="w"> </span>update
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>Hang<span class="w"> </span>tight<span class="w"> </span><span class="k">while</span><span class="w"> </span>we<span class="w"> </span>grab<span class="w"> </span>the<span class="w"> </span>latest<span class="w"> </span>from<span class="w"> </span>your<span class="w"> </span>chart<span class="w"> </span>repositories...
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>...Successfully<span class="w"> </span>got<span class="w"> </span>an<span class="w"> </span>update<span class="w"> </span>from<span class="w"> </span>the<span class="w"> </span><span class="s2">&quot;aad-pod-identity&quot;</span><span class="w"> </span>chart<span class="w"> </span>repository
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>Update<span class="w"> </span>Complete.<span class="w"> </span>⎈Happy<span class="w"> </span>Helming!⎈
</code></pre></div>
<p>Lastly, install the Helm chart into your cluster:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>helm<span class="w"> </span>install<span class="w"> </span>aad-pod-identity<span class="w"> </span>aad-pod-identity/aad-pod-identity<span class="w"> </span>--set<span class="w"> </span>nmi.allowNetworkPluginKubenet<span class="o">=</span><span class="nb">true</span>
</code></pre></div>
<h3 id="creating-a-user-assigned-managed-identity-for-promitor">Creating a user-assigned managed identity for Promitor<a class="headerlink" href="#creating-a-user-assigned-managed-identity-for-promitor" title="Permanent link">&para;</a></h3>
<p>In order to let Promitor to authenticate to Azure, we have two options:</p>
<ol>
<li>Re-ue the managed identity of our cluster, or (syste-assigned)</li>
<li>Create a new identity that we will assign to our Promitor pods (user-assigned)</li>
</ol>
<p>In order to <a href="https://en.wikipedia.org/wiki/Separation_of_concerns">separate our concerns</a>, we will create a new
 identity for it:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Create identity </span><span class="nv">$AD_POD_IDENTITY_NAME</span><span class="s2"> in resource group </span><span class="nv">$RG_NAME</span><span class="s2">&quot;</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>az<span class="w"> </span>identity<span class="w"> </span>create<span class="w"> </span>-g<span class="w"> </span><span class="si">${</span><span class="nv">RG_NAME</span><span class="si">}</span><span class="w"> </span>-n<span class="w"> </span><span class="si">${</span><span class="nv">AD_POD_IDENTITY_NAME</span><span class="si">}</span>
</code></pre></div>
<p>Our new identity will be used by <strong>Promitor</strong> to access <strong>Azure Monitor</strong> to get metrics by using its assigned
 <strong>RBAC roles assignements</strong>:</p>
<p>First, we will get the client &amp; resource id of our identity:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="nb">export</span><span class="w"> </span><span class="nv">AD_POD_IDENTITY_CLIENT_ID</span><span class="o">=</span><span class="k">$(</span>az<span class="w"> </span>identity<span class="w"> </span>show<span class="w"> </span>-g<span class="w"> </span><span class="si">${</span><span class="nv">RG_NAME</span><span class="si">}</span><span class="w"> </span>-n<span class="w"> </span><span class="si">${</span><span class="nv">AD_POD_IDENTITY_NAME</span><span class="si">}</span><span class="w"> </span>--query<span class="w"> </span><span class="s2">&quot;clientId&quot;</span><span class="w"> </span>-o<span class="w"> </span>tsv<span class="k">)</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="nb">export</span><span class="w"> </span><span class="nv">AD_POD_IDENTITY_RESOURCE_ID</span><span class="o">=</span><span class="k">$(</span>az<span class="w"> </span>identity<span class="w"> </span>show<span class="w"> </span>-g<span class="w"> </span><span class="si">${</span><span class="nv">RG_NAME</span><span class="si">}</span><span class="w"> </span>-n<span class="w"> </span><span class="si">${</span><span class="nv">AD_POD_IDENTITY_NAME</span><span class="si">}</span><span class="w"> </span>--query<span class="w"> </span><span class="s2">&quot;id&quot;</span><span class="w"> </span>-o<span class="w"> </span>tsv<span class="k">)</span>
</code></pre></div>
<p>Next, we will assign the <code>Monitoring Reader</code> role to our identity on our resource group to scrape our Azure Service Bus namespace:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>$<span class="w"> </span>az<span class="w"> </span>role<span class="w"> </span>assignment<span class="w"> </span>create<span class="w"> </span>--role<span class="w"> </span><span class="s2">&quot;Monitoring Reader&quot;</span><span class="w"> </span>--scope<span class="w"> </span><span class="s2">&quot;/subscriptions/</span><span class="nv">$SUBSCRIPTION_ID</span><span class="s2">/resourceGroups/</span><span class="nv">$RG_NAME</span><span class="s2">&quot;</span><span class="w"> </span>--assignee<span class="w"> </span><span class="s2">&quot;</span><span class="si">${</span><span class="nv">AD_POD_IDENTITY_CLIENT_ID</span><span class="si">}</span><span class="s2">&quot;</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="o">{</span>
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="w">  </span><span class="s2">&quot;canDelegate&quot;</span>:<span class="w"> </span>null,
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="w">  </span><span class="s2">&quot;condition&quot;</span>:<span class="w"> </span>null,
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="w">  </span><span class="s2">&quot;conditionVersion&quot;</span>:<span class="w"> </span>null,
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="w">  </span><span class="s2">&quot;description&quot;</span>:<span class="w"> </span>null,
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="w">  </span><span class="s2">&quot;id&quot;</span>:<span class="w"> </span><span class="s2">&quot;/subscriptions/&lt;subscription-id&gt;/resourceGroups/&lt;resource-group-name&gt;/providers/Microsoft.Authorization/roleAssignments/92b1566a-2346-43f7-a093-1fd5871d4de8&quot;</span>,
<a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a><span class="w">  </span><span class="s2">&quot;name&quot;</span>:<span class="w"> </span><span class="s2">&quot;92b1566a-2346-43f7-a093-1fd5871d4de8&quot;</span>,
<a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a><span class="w">  </span><span class="s2">&quot;principalId&quot;</span>:<span class="w"> </span><span class="s2">&quot;&lt;promitor-identity-id&gt;&quot;</span>,
<a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a><span class="w">  </span><span class="s2">&quot;principalType&quot;</span>:<span class="w"> </span><span class="s2">&quot;ServicePrincipal&quot;</span>,
<a id="__codelineno-15-11" name="__codelineno-15-11" href="#__codelineno-15-11"></a><span class="w">  </span><span class="s2">&quot;resourceGroup&quot;</span>:<span class="w"> </span><span class="s2">&quot;&lt;resource-group-name&gt;&quot;</span>,
<a id="__codelineno-15-12" name="__codelineno-15-12" href="#__codelineno-15-12"></a><span class="w">  </span><span class="s2">&quot;roleDefinitionId&quot;</span>:<span class="w"> </span><span class="s2">&quot;/subscriptions/&lt;subscription-id&gt;/providers/Microsoft.Authorization/roleDefinitions/43d0d8ad-25c7-4714-9337-8ba259a9fe05&quot;</span>,
<a id="__codelineno-15-13" name="__codelineno-15-13" href="#__codelineno-15-13"></a><span class="w">  </span><span class="s2">&quot;scope&quot;</span>:<span class="w"> </span><span class="s2">&quot;/subscriptions/&lt;subscription-id&gt;/resourceGroups/&lt;resource-group-name&gt;&quot;</span>,
<a id="__codelineno-15-14" name="__codelineno-15-14" href="#__codelineno-15-14"></a><span class="w">  </span><span class="s2">&quot;type&quot;</span>:<span class="w"> </span><span class="s2">&quot;Microsoft.Authorization/roleAssignments&quot;</span>
<a id="__codelineno-15-15" name="__codelineno-15-15" href="#__codelineno-15-15"></a><span class="o">}</span>
</code></pre></div>
<p>In order to verify our role assignement, you can use this command:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>az<span class="w"> </span>role<span class="w"> </span>assignment<span class="w"> </span>list<span class="w"> </span>--assignee<span class="w"> </span><span class="nv">$AD_POD_IDENTITY_CLIENT_ID</span><span class="w"> </span>-g<span class="w"> </span><span class="nv">$RG_NAME</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>jq<span class="w"> </span>-r<span class="w"> </span><span class="s1">&#39;.[].roleDefinitionName&#39;</span>
</code></pre></div>
<blockquote>
<p>💡 <em>It can take some times before the identity is correctly propagated in Azure Active Directory.</em>
<em>So far if you encountered an error where the identity is not found, please wait 60 sec and retry</em></p>
</blockquote>
<h3 id="bind-your-managed-identity-to-our-pods-through-aad-pod-identity">Bind your Managed Identity to our Pods, through AAD Pod Identity<a class="headerlink" href="#bind-your-managed-identity-to-our-pods-through-aad-pod-identity" title="Permanent link">&para;</a></h3>
<p>Now that our identity is created, we can tell AAD Pod Identity that we want to bind our Azure AD identity to our pods:</p>
<p>First, we will define the identity that we want to assign:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>cat<span class="w"> </span><span class="s">&lt;&lt;EOF | kubectl apply -f -</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="s">apiVersion: &quot;aadpodidentity.k8s.io/v1&quot;</span>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="s">kind: AzureIdentity</span>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="s">metadata:</span>
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="s">  name: ${AD_POD_IDENTITY_NAME}</span>
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="s">spec:</span>
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="s">  type: 0 # 0 - user assigned MSI, 1 - service principal</span>
<a id="__codelineno-17-8" name="__codelineno-17-8" href="#__codelineno-17-8"></a><span class="s">  resourceID: ${AD_POD_IDENTITY_RESOURCE_ID}</span>
<a id="__codelineno-17-9" name="__codelineno-17-9" href="#__codelineno-17-9"></a><span class="s">  clientID: ${AD_POD_IDENTITY_CLIENT_ID}</span>
<a id="__codelineno-17-10" name="__codelineno-17-10" href="#__codelineno-17-10"></a><span class="s">EOF</span>
</code></pre></div>
<p>Next, we want to define to what pods we want to link it:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a>cat<span class="w"> </span><span class="s">&lt;&lt;EOF | kubectl apply -f -</span>
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="s">apiVersion: &quot;aadpodidentity.k8s.io/v1&quot;</span>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="s">kind: AzureIdentityBinding</span>
<a id="__codelineno-18-4" name="__codelineno-18-4" href="#__codelineno-18-4"></a><span class="s">metadata:</span>
<a id="__codelineno-18-5" name="__codelineno-18-5" href="#__codelineno-18-5"></a><span class="s">  name: ${AD_POD_IDENTITY_NAME}-binding</span>
<a id="__codelineno-18-6" name="__codelineno-18-6" href="#__codelineno-18-6"></a><span class="s">spec:</span>
<a id="__codelineno-18-7" name="__codelineno-18-7" href="#__codelineno-18-7"></a><span class="s">  azureIdentity: ${AD_POD_IDENTITY_NAME}</span>
<a id="__codelineno-18-8" name="__codelineno-18-8" href="#__codelineno-18-8"></a><span class="s">  selector: ${AD_POD_IDENTITY_NAME}</span>
<a id="__codelineno-18-9" name="__codelineno-18-9" href="#__codelineno-18-9"></a><span class="s">EOF</span>
</code></pre></div>
<p>You can verify that the resources were created successfully as following:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>kubectl<span class="w"> </span>get<span class="w"> </span>azureidentity
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>kubectl<span class="w"> </span>get<span class="w"> </span>azureidentitybinding
</code></pre></div>
<h3 id="verifying-the-aad-pod-identity-installation">Verifying the AAD Pod Identity installation<a class="headerlink" href="#verifying-the-aad-pod-identity-installation" title="Permanent link">&para;</a></h3>
<p>Before going further, we will check if our AAD Pod Identity is deployed &amp; configured correctly.</p>
<p>We will spin up a pod and use the Azure CLI to authenticate:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a>kubectl<span class="w"> </span>run<span class="w"> </span>azure-cli<span class="w"> </span>-it<span class="w"> </span>--image<span class="o">=</span>mcr.microsoft.com/azure-cli<span class="w"> </span>--labels<span class="o">=</span><span class="nv">aadpodidbinding</span><span class="o">=</span><span class="nv">$AD_POD_IDENTITY_NAME</span><span class="w"> </span>/bin/bash
</code></pre></div>
<p>Note that we are adding <code>aadpodidbinding</code> as a label, which is linking the pod to the AAD Pod Identity binding
 that we have just created.</p>
<blockquote>
<p><em><strong>Warning:</strong></em> It can take some times to Aad Pod Identity to bind the identity to your deployed container.
If you encountered an error, relaunch the <code>az login -i --debug</code> command after 60 sec.</p>
</blockquote>
<p>Next, we will run <code>az login -i --debug</code> to see the different steps it takes:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="c1"># Once you are log in the container, and have the bash command line available, try to login using the Managed Identity:</span>
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="c1"># If you don&#39;t see a command prompt, try pressing enter.</span>
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a>$<span class="w"> </span>bash-5.0#<span class="w"> </span>az<span class="w"> </span>login<span class="w"> </span>-i<span class="w"> </span>--debug
<a id="__codelineno-21-4" name="__codelineno-21-4" href="#__codelineno-21-4"></a>msrestazure.azure_active_directory:<span class="w"> </span>MSI:<span class="w"> </span>Retrieving<span class="w"> </span>a<span class="w"> </span>token<span class="w"> </span>from<span class="w"> </span>http://169.254.169.254/metadata/identity/oauth2/token,<span class="w"> </span>with<span class="w"> </span>payload<span class="w"> </span><span class="o">{</span><span class="s1">&#39;resource&#39;</span>:<span class="w"> </span><span class="s1">&#39;https://management.core.windows.net/&#39;</span>,<span class="w"> </span><span class="s1">&#39;api-version&#39;</span>:<span class="w"> </span><span class="s1">&#39;2018-02-01&#39;</span><span class="o">}</span>
<a id="__codelineno-21-5" name="__codelineno-21-5" href="#__codelineno-21-5"></a>msrestazure.azure_active_directory:<span class="w"> </span>MSI:<span class="w"> </span>Token<span class="w"> </span>retrieved
<a id="__codelineno-21-6" name="__codelineno-21-6" href="#__codelineno-21-6"></a>cli.azure.cli.core._profile:<span class="w"> </span>MSI:<span class="w"> </span>token<span class="w"> </span>was<span class="w"> </span>retrieved.<span class="w"> </span>Now<span class="w"> </span>trying<span class="w"> </span>to<span class="w"> </span>initialize<span class="w"> </span><span class="nb">local</span><span class="w"> </span>accounts...
<a id="__codelineno-21-7" name="__codelineno-21-7" href="#__codelineno-21-7"></a>...
<a id="__codelineno-21-8" name="__codelineno-21-8" href="#__codelineno-21-8"></a><span class="o">[</span>
<a id="__codelineno-21-9" name="__codelineno-21-9" href="#__codelineno-21-9"></a><span class="w">  </span><span class="o">{</span>
<a id="__codelineno-21-10" name="__codelineno-21-10" href="#__codelineno-21-10"></a><span class="w">    </span><span class="s2">&quot;environmentName&quot;</span>:<span class="w"> </span><span class="s2">&quot;AzureCloud&quot;</span>,
<a id="__codelineno-21-11" name="__codelineno-21-11" href="#__codelineno-21-11"></a><span class="w">    </span><span class="s2">&quot;homeTenantId&quot;</span>:<span class="w"> </span><span class="s2">&quot;e0372f7f-a362-47fb-9631-74a5c4ba8bbf&quot;</span>,
<a id="__codelineno-21-12" name="__codelineno-21-12" href="#__codelineno-21-12"></a><span class="w">    </span><span class="s2">&quot;id&quot;</span>:<span class="w"> </span><span class="s2">&quot;0f9d7fea-99e8-4768-8672-06a28514f77e&quot;</span>,
<a id="__codelineno-21-13" name="__codelineno-21-13" href="#__codelineno-21-13"></a><span class="w">    </span><span class="s2">&quot;isDefault&quot;</span>:<span class="w"> </span>true,
<a id="__codelineno-21-14" name="__codelineno-21-14" href="#__codelineno-21-14"></a><span class="w">    </span><span class="s2">&quot;managedByTenants&quot;</span>:<span class="w"> </span><span class="o">[</span>
<a id="__codelineno-21-15" name="__codelineno-21-15" href="#__codelineno-21-15"></a><span class="w">      </span><span class="o">{</span>
<a id="__codelineno-21-16" name="__codelineno-21-16" href="#__codelineno-21-16"></a><span class="w">        </span><span class="s2">&quot;tenantId&quot;</span>:<span class="w"> </span><span class="s2">&quot;2f4a9838-26b7-47ee-be60-ccc1fdec5953&quot;</span>
<a id="__codelineno-21-17" name="__codelineno-21-17" href="#__codelineno-21-17"></a><span class="w">      </span><span class="o">}</span>
<a id="__codelineno-21-18" name="__codelineno-21-18" href="#__codelineno-21-18"></a><span class="w">    </span><span class="o">]</span>,
<a id="__codelineno-21-19" name="__codelineno-21-19" href="#__codelineno-21-19"></a><span class="w">    </span><span class="s2">&quot;name&quot;</span>:<span class="w"> </span><span class="s2">&quot;Visual Studio Enterprise&quot;</span>,
<a id="__codelineno-21-20" name="__codelineno-21-20" href="#__codelineno-21-20"></a><span class="w">    </span><span class="s2">&quot;state&quot;</span>:<span class="w"> </span><span class="s2">&quot;Enabled&quot;</span>,
<a id="__codelineno-21-21" name="__codelineno-21-21" href="#__codelineno-21-21"></a><span class="w">    </span><span class="s2">&quot;tenantId&quot;</span>:<span class="w"> </span><span class="s2">&quot;e0372f7f-a362-47fb-9631-74a5c4ba8bbf&quot;</span>,
<a id="__codelineno-21-22" name="__codelineno-21-22" href="#__codelineno-21-22"></a><span class="w">    </span><span class="s2">&quot;user&quot;</span>:<span class="w"> </span><span class="o">{</span>
<a id="__codelineno-21-23" name="__codelineno-21-23" href="#__codelineno-21-23"></a><span class="w">      </span><span class="s2">&quot;assignedIdentityInfo&quot;</span>:<span class="w"> </span><span class="s2">&quot;MSI&quot;</span>,
<a id="__codelineno-21-24" name="__codelineno-21-24" href="#__codelineno-21-24"></a><span class="w">      </span><span class="s2">&quot;name&quot;</span>:<span class="w"> </span><span class="s2">&quot;systemAssignedIdentity&quot;</span>,
<a id="__codelineno-21-25" name="__codelineno-21-25" href="#__codelineno-21-25"></a><span class="w">      </span><span class="s2">&quot;type&quot;</span>:<span class="w"> </span><span class="s2">&quot;servicePrincipal&quot;</span>
<a id="__codelineno-21-26" name="__codelineno-21-26" href="#__codelineno-21-26"></a><span class="w">    </span><span class="o">}</span>
<a id="__codelineno-21-27" name="__codelineno-21-27" href="#__codelineno-21-27"></a><span class="w">  </span><span class="o">}</span>
<a id="__codelineno-21-28" name="__codelineno-21-28" href="#__codelineno-21-28"></a><span class="o">]</span>
</code></pre></div>
<p>If your Azure CLI container is able to retrieve some information from Azure
without having to log in with your credentials,
it means the CLI is using your Managed Identity, through the Pod Identity Binding.</p>
<p>You may have a result indicating you are log in, using a <strong>System Assigned Identity</strong></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="nt">&quot;user&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="w">    </span><span class="nt">&quot;assignedIdentityInfo&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;MSI&quot;</span><span class="p">,</span>
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;systemAssignedIdentity&quot;</span><span class="p">,</span>
<a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="p">}</span>
</code></pre></div>
<h2 id="deploying-promitor-with-managed-identity">Deploying Promitor with Managed Identity<a class="headerlink" href="#deploying-promitor-with-managed-identity" title="Permanent link">&para;</a></h2>
<h3 id="create-a-metrics-declaration-for-promitor">Create a metrics declaration for Promitor<a class="headerlink" href="#create-a-metrics-declaration-for-promitor" title="Permanent link">&para;</a></h3>
<p>Before deploying Promitor, we will create a values file for our Helm deployment.</p>
<p>In the configuration, we define what Azure resource that we want to scrape and that we want to use managed identity.</p>
<p>Here is an example:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="nt">azureAuthentication</span><span class="p">:</span>
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="w">  </span><span class="nt">mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SystemAssignedManagedIdentity</span>
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a><span class="w">  </span><span class="nt">identity</span><span class="p">:</span>
<a id="__codelineno-23-4" name="__codelineno-23-4" href="#__codelineno-23-4"></a><span class="w">    </span><span class="nt">binding</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;aad-pod-identity-name&gt;</span><span class="w">              </span><span class="c1"># &lt;- This is the value of AD_POD_IDENTITY_NAME environment variable</span>
<a id="__codelineno-23-5" name="__codelineno-23-5" href="#__codelineno-23-5"></a><span class="nt">azureMetadata</span><span class="p">:</span>
<a id="__codelineno-23-6" name="__codelineno-23-6" href="#__codelineno-23-6"></a><span class="w">  </span><span class="nt">tenantId</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;tenant-id&gt;</span>
<a id="__codelineno-23-7" name="__codelineno-23-7" href="#__codelineno-23-7"></a><span class="w">  </span><span class="nt">subscriptionId</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;subscription-id&gt;</span><span class="w">               </span><span class="c1"># &lt;- This is the value of SUBSCRIPTION_ID environment variable</span>
<a id="__codelineno-23-8" name="__codelineno-23-8" href="#__codelineno-23-8"></a><span class="w">  </span><span class="nt">resourceGroupName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;promitor-resource-group-id&gt;</span><span class="w"> </span><span class="c1"># &lt;- This is the value of RG_NAME environment variable</span>
<a id="__codelineno-23-9" name="__codelineno-23-9" href="#__codelineno-23-9"></a><span class="nt">metricDefaults</span><span class="p">:</span>
<a id="__codelineno-23-10" name="__codelineno-23-10" href="#__codelineno-23-10"></a><span class="w">  </span><span class="nt">aggregation</span><span class="p">:</span>
<a id="__codelineno-23-11" name="__codelineno-23-11" href="#__codelineno-23-11"></a><span class="w">    </span><span class="nt">interval</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">00:05:00</span>
<a id="__codelineno-23-12" name="__codelineno-23-12" href="#__codelineno-23-12"></a><span class="w">  </span><span class="nt">scraping</span><span class="p">:</span>
<a id="__codelineno-23-13" name="__codelineno-23-13" href="#__codelineno-23-13"></a><span class="w">    </span><span class="nt">schedule</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;*</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">*</span><span class="nv"> </span><span class="s">*&quot;</span>
<a id="__codelineno-23-14" name="__codelineno-23-14" href="#__codelineno-23-14"></a><span class="nt">metrics</span><span class="p">:</span>
<a id="__codelineno-23-15" name="__codelineno-23-15" href="#__codelineno-23-15"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">demo_queue_size</span>
<a id="__codelineno-23-16" name="__codelineno-23-16" href="#__codelineno-23-16"></a><span class="w">    </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Amount</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">active</span><span class="nv"> </span><span class="s">messages</span><span class="nv"> </span><span class="s">of</span><span class="nv"> </span><span class="s">the</span><span class="nv"> </span><span class="s">&#39;demo_queue&#39;</span><span class="nv"> </span><span class="s">queue&quot;</span>
<a id="__codelineno-23-17" name="__codelineno-23-17" href="#__codelineno-23-17"></a><span class="w">    </span><span class="nt">resourceType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ServiceBusNamespace</span>
<a id="__codelineno-23-18" name="__codelineno-23-18" href="#__codelineno-23-18"></a><span class="w">    </span><span class="nt">azureMetricConfiguration</span><span class="p">:</span>
<a id="__codelineno-23-19" name="__codelineno-23-19" href="#__codelineno-23-19"></a><span class="w">      </span><span class="nt">metricName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ActiveMessages</span>
<a id="__codelineno-23-20" name="__codelineno-23-20" href="#__codelineno-23-20"></a><span class="w">      </span><span class="nt">aggregation</span><span class="p">:</span>
<a id="__codelineno-23-21" name="__codelineno-23-21" href="#__codelineno-23-21"></a><span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Total</span>
<a id="__codelineno-23-22" name="__codelineno-23-22" href="#__codelineno-23-22"></a><span class="w">    </span><span class="nt">resources</span><span class="p">:</span>
<a id="__codelineno-23-23" name="__codelineno-23-23" href="#__codelineno-23-23"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;service-bus-namespace&gt;</span><span class="w">        </span><span class="c1"># &lt;- This is the value of SERVICE_BUS_NAMESPACE environment variable</span>
<a id="__codelineno-23-24" name="__codelineno-23-24" href="#__codelineno-23-24"></a><span class="w">        </span><span class="nt">queueName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;service-bus-queue&gt;</span><span class="w">            </span><span class="c1"># &lt;- This is the value of SERVICE_BUS_QUEUE_NAME environment variable</span>
</code></pre></div>
<h3 id="deploy-promitor-to-your-cluster-using-helm">Deploy Promitor to your cluster using Helm<a class="headerlink" href="#deploy-promitor-to-your-cluster-using-helm" title="Permanent link">&para;</a></h3>
<p>To deploy, we'll first add the Promitor chart repository to helm:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a>helm<span class="w"> </span>repo<span class="w"> </span>add<span class="w"> </span>promitor<span class="w"> </span>https://charts.promitor.io/
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a>helm<span class="w"> </span>repo<span class="w"> </span>update
</code></pre></div>
<p>With this repository added, we can deploy Promitor:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>helm<span class="w"> </span>install<span class="w"> </span>promitor-agent-scraper<span class="w"> </span>promitor/promitor-agent-scraper<span class="w"> </span>--values<span class="w"> </span>your/path/to/metric-declaration.yaml
</code></pre></div>
<h3 id="verifying-the-scraped-output-in-promitor">Verifying the scraped output in Promitor<a class="headerlink" href="#verifying-the-scraped-output-in-promitor" title="Permanent link">&para;</a></h3>
<p>You can check that Promitor is getting insights from you Azure Service Bus queue, using the managed identity, with this commands.</p>
<p>First, we get the name of the Promitor Scraper pod:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="c1"># Get promitor pod</span>
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="nb">export</span><span class="w"> </span><span class="nv">POD_NAME</span><span class="o">=</span><span class="k">$(</span>kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>--namespace<span class="w"> </span>default<span class="w"> </span>-l<span class="w"> </span><span class="s2">&quot;app.kubernetes.io/instance=promitor-agent-scraper&quot;</span><span class="w"> </span>-o<span class="w"> </span><span class="nv">jsonpath</span><span class="o">=</span><span class="s2">&quot;{.items[0].metadata.name}&quot;</span><span class="k">)</span>
</code></pre></div>
<p>Next, we add port forwarding from our pod to our local machine:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>kubectl<span class="w"> </span>port-forward<span class="w"> </span>--namespace<span class="w"> </span>default<span class="w"> </span><span class="nv">$POD_NAME</span><span class="w"> </span><span class="m">8080</span>:88
</code></pre></div>
<p>Now browse to the address <a href="http://127.0.0.1:8080/metrics">http://127.0.0.1:8080/metrics</a> and check your metrics are scrapped:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a># HELP demo_queue_size Amount of active messages of the &#39;demo_queue&#39; queue
<a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a># TYPE demo_queue_size gauge
<a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a>demo_queue_size{resource_group=&quot;ammdocs&quot;,subscription_id=&quot;xxxxx-xxxxx-xxxxx-xxxxxx-xxxxx&quot;,resource_uri=&quot;subscriptions/xxxxx-xxxxx-xxxxx-xxxxxx-xxxxx/resourceGroups/YOUR_RESOURCE_GROUP_NAME/providers/Microsoft.ServiceBus/namespaces/YOUR_SERVICE_BUS_NAMESPACE&quot;,instance_name=&quot;INSTANCE_NAME&quot;,entity_name=&quot;YOUR_SERVICE_BUS_QUEUE&quot;} 0 1612952581417
</code></pre></div>
<h2 id="cleaning-up">Cleaning up<a class="headerlink" href="#cleaning-up" title="Permanent link">&para;</a></h2>
<p>To delete all the resources used in this tutorial, run <code>az group delete --name $RG_NAME</code>.</p>
<p><a href="../../">&larr; back</a></p>









  




                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2018 - 2021 Tom Kerkhove
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
    <a href="https://github.com/tomkerkhove?tab=packages&repo_name=promitor" target="_blank" rel="noopener" title="Container Registry" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1zm0-204.3h-66.1v60.7h66.1zm78.2 144.8H362v59.4h66.1zm-156.3-72.1h-66.1v60.1h66.1zm78.1 0h-66.1v60.1h66.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1zm78.1 0h-66.1v59.4h66.1zm-78.1-72.1h-66.1v60.1h66.1z"/></svg>
    </a>
  
    
    
    
    
    <a href="https://github.com/promitor/docs" target="_blank" rel="noopener" title="GitHub" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
    <a href="https://twitter.com/promitorio" target="_blank" rel="noopener" title="Follow us on Twitter" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253"/></svg>
    </a>
  
    
    
    
    
    <a href="https://github.com/sponsors/promitor" target="_blank" rel="noopener" title="Sponsor Promitor" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="m47.6 300.4 180.7 168.7c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9l180.7-168.7c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141-45.6-7.6-92 7.3-124.6 39.9l-12 12-12-12c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.expand", "navigation.sections", "navigation.tabs.sticky", "navigation.tabs", "navigation.indexes", "navigation.top", "navigation.tracking", "toc.follow", "content.code.annotate", "content.tabs.link", "search.highlight", "search.share", "search.suggest"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.f1b6f286.min.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>